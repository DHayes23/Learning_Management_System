{% extends "base.html" %}

{% block content %}
<div class="path-card-container">
    <h1 class="profile-heading">{{ user.username }}'s Profile</h1>

    {% if assigned_paths %}
        <h2 class="section-heading">Assigned Paths</h2>
        <div class="path-card-grid">
            {% for path in assigned_paths %}
                <div class="path-card">
                    <h3>{{ path.name }}</h3>
                    <p>{{ path.description }}</p>
                    <a href="javascript:void(0);" class="primary-button" onclick="toggleModules({{ path.id }});">View Modules</a>
                    <div id="modules-{{ path.id }}" class="modules-container">
                        <ul>
                            {% for module in path.modules.all %}
                                <li><a href="{% url 'module_detail' module.id %}">{{ module.name }}</a></li>
                            {% endfor %}
                        </ul>
                    </div>
                </div>
            {% endfor %}
        </div>
    {% endif %}
</div>

<!-- JavaScript for toggling the display of modules -->
<script>
    function toggleModules(pathId) {
        var modulesContainer = document.getElementById('modules-' + pathId);
        if (modulesContainer.classList.contains('show')) {
            modulesContainer.classList.remove('show');
            setTimeout(function() {
                modulesContainer.style.display = 'none';
            }, 300);
        } else {
            modulesContainer.style.display = 'block';
            setTimeout(function() {
                modulesContainer.classList.add('show');
            }, 10);
        }
    }
</script>

{% endblock %}
